local NovaLib = {}

function NovaLib:CreateWindow(options)
    local Theme = Themes[options.Theme] or Themes["Default"]

    -- ScreenGui
    local ScreenGui = Instance.new("ScreenGui")
    ScreenGui.Name = "NovaUI"
    ScreenGui.ResetOnSpawn = false
    ScreenGui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")

    -- Loading Screen
    if options.LoadingScreen then
        local LoadingFrame = Instance.new("Frame")
        LoadingFrame.Size = UDim2.new(1, 0, 1, 0)
        LoadingFrame.BackgroundColor3 = Theme.Background
        LoadingFrame.Parent = ScreenGui

        local LoadingTitle = Instance.new("TextLabel")
        LoadingTitle.Text = options.LoadingTitle or "Loading..."
        LoadingTitle.Font = Enum.Font.GothamBold
        LoadingTitle.TextSize = 24
        LoadingTitle.TextColor3 = Theme.TextColor
        LoadingTitle.BackgroundTransparency = 1
        LoadingTitle.Size = UDim2.new(1, 0, 0, 40)
        LoadingTitle.Position = UDim2.new(0, 0, 0.5, -40)
        LoadingTitle.Parent = LoadingFrame

        local LoadingSubtitle = Instance.new("TextLabel")
        LoadingSubtitle.Text = options.LoadingSubTitle or ""
        LoadingSubtitle.Font = Enum.Font.Gotham
        LoadingSubtitle.TextSize = 16
        LoadingSubtitle.TextColor3 = Theme.TextColor
        LoadingSubtitle.BackgroundTransparency = 1
        LoadingSubtitle.Size = UDim2.new(1, 0, 0, 30)
        LoadingSubtitle.Position = UDim2.new(0, 0, 0.5, 0)
        LoadingSubtitle.Parent = LoadingFrame

        task.delay(options.LoadingScreenDuration or 2, function()
            LoadingFrame:Destroy()
        end)
    end

    -- Main Window
    local MainFrame = Instance.new("Frame")
    MainFrame.Name = "MainFrame"
    MainFrame.Size = UDim2.new(0, 500, 0, 400)
    MainFrame.Position = UDim2.new(0.5, -250, 0.5, -200)
    MainFrame.BackgroundColor3 = Theme.Background
    MainFrame.BorderSizePixel = 0
    MainFrame.ClipsDescendants = true
    MainFrame.Parent = ScreenGui

    local MainCorner = Instance.new("UICorner", MainFrame)
    MainCorner.CornerRadius = UDim.new(0, 12)

    -- Top Bar
    local TopBar = Instance.new("Frame")
    TopBar.Size = UDim2.new(1, 0, 0, 40)
    TopBar.BackgroundColor3 = Theme.Background
    TopBar.BorderSizePixel = 0
    TopBar.Parent = MainFrame

    local TopBarCorner = Instance.new("UICorner", TopBar)
    TopBarCorner.CornerRadius = UDim.new(0, 12)

    local Title = Instance.new("TextLabel")
    Title.Text = options.Name or "Nova Library"
    Title.Font = Enum.Font.GothamBold
    Title.TextColor3 = Theme.TextColor
    Title.TextSize = 18
    Title.BackgroundTransparency = 1
    Title.Size = UDim2.new(1, -20, 1, 0)
    Title.Position = UDim2.new(0, 10, 0, 0)
    Title.TextXAlignment = Enum.TextXAlignment.Left
    Title.Parent = TopBar

    -- Tab List
    local TabList = Instance.new("Frame")
    TabList.Size = UDim2.new(0, 120, 1, -40)
    TabList.Position = UDim2.new(0, 0, 0, 40)
    TabList.BackgroundColor3 = Theme.TabList
    TabList.BorderSizePixel = 0
    TabList.Parent = MainFrame

    local TabListCorner = Instance.new("UICorner", TabList)
    TabListCorner.CornerRadius = UDim.new(0, 12)

    local TabsLayout = Instance.new("UIListLayout", TabList)
    TabsLayout.Padding = UDim.new(0, 5)
    TabsLayout.SortOrder = Enum.SortOrder.LayoutOrder
    TabsLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center
    TabsLayout.VerticalAlignment = Enum.VerticalAlignment.Top

    return {
        MainFrame = MainFrame,
        TabList = TabList,
        Theme = Theme
    }
end

return NovaLib
